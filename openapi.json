{"openapi":"3.1.0","info":{"title":"Te Pō — Kitenga Whiro Backend","description":"Awa Network core backend orchestrator — Māori Intelligence Engine","version":"1.0.0"},"paths":{"/":{"get":{"tags":["Root"],"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/heartbeat":{"get":{"tags":["Health"],"summary":"Heartbeat","operationId":"heartbeat_heartbeat_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/intake/ocr":{"post":{"tags":["Intake"],"summary":"Intake Ocr","operationId":"intake_ocr_intake_ocr_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_intake_ocr_intake_ocr_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/intake/summarize":{"post":{"tags":["Intake"],"summary":"Intake Summarize","operationId":"intake_summarize_intake_summarize_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SummarizeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reo/translate":{"post":{"tags":["Reo"],"summary":"Reo Translate","operationId":"reo_translate_reo_translate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReoRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reo/explain":{"post":{"tags":["Reo"],"summary":"Reo Explain","operationId":"reo_explain_reo_explain_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReoRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reo/pronounce":{"post":{"tags":["Reo"],"summary":"Reo Pronounce","operationId":"reo_pronounce_reo_pronounce_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReoRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/vector/embed":{"post":{"tags":["Vector"],"summary":"Vector Embed","operationId":"vector_embed_vector_embed_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbedRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/vector/search":{"post":{"tags":["Vector"],"summary":"Vector Search","operationId":"vector_search_vector_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/te_po__models__vector_models__SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/vector/retrieval-test":{"post":{"tags":["Vector"],"summary":"Vector Retrieval Test","description":"Run a simple retrieval against stored embeddings for confidence checks.","operationId":"vector_retrieval_test_vector_retrieval_test_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/te_po__models__vector_models__SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/vector/recent":{"get":{"tags":["Vector"],"summary":"Vector Recent","description":"Return recent vector logs saved locally (te_po/storage/openai/<glyph>.json).\nUseful for UI 'recent vectors' display.","operationId":"vector_recent_vector_recent_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"default":5,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/vector/batch-status":{"get":{"tags":["Vector"],"summary":"Vector Batch Status","description":"Check the status of a vector store file batch (GA OpenAI API).","operationId":"vector_batch_status_vector_batch_status_get","parameters":[{"name":"batch_id","in":"query","required":true,"schema":{"type":"string","description":"OpenAI vector store file batch id","title":"Batch Id"},"description":"OpenAI vector store file batch id"},{"name":"vector_store_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Override vector store id; defaults to OPENAI_VECTOR_STORE_ID env","title":"Vector Store Id"},"description":"Override vector store id; defaults to OPENAI_VECTOR_STORE_ID env"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/status":{"get":{"tags":["Status"],"summary":"Status","description":"Lightweight health endpoint for Te Pō.","operationId":"status_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/status/openai":{"get":{"tags":["Status"],"summary":"Status Openai","description":"Check OpenAI readiness (key present, optional vector store reachable).","operationId":"status_openai_status_openai_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/status/full":{"get":{"tags":["Status"],"summary":"Status Full","operationId":"status_full_status_full_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/ocr/scan":{"post":{"summary":"Scan","operationId":"scan_ocr_scan_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_scan_ocr_scan_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ocr/stealth":{"post":{"summary":"Stealth Scan","description":"Direct StealthOCR test endpoint using real Tesseract + vision fallback (with cultural protection).\nReturns the protected text and metadata; does NOT run the full pipeline.","operationId":"stealth_scan_ocr_stealth_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_stealth_scan_ocr_stealth_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ocr/stealth-testit":{"post":{"summary":"Stealth Scan Testit","description":"Alternate StealthOCR test endpoint using the testit class (real Tesseract + vision).\nUseful to compare behaviors without touching the main pipeline.","operationId":"stealth_scan_testit_ocr_stealth_testit_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_stealth_scan_testit_ocr_stealth_testit_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/research/query":{"post":{"summary":"Research","operationId":"research_research_query_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Body"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/research/web_search":{"post":{"summary":"Research Web Search","description":"Web search via Brave API with optional site filters. Falls back to stacked search if missing key, empty, or failure.","operationId":"research_web_search_research_web_search_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/research/stacked":{"post":{"summary":"Research Stacked","description":"Layered research: local vector search -> recent docs -> web/LLM fallback.","operationId":"research_stacked_research_stacked_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dev/ocr":{"post":{"tags":["Dev"],"summary":"Dev Ocr","operationId":"dev_ocr_dev_ocr_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_dev_ocr_dev_ocr_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dev/clean":{"get":{"tags":["Dev"],"summary":"Dev Clean","operationId":"dev_clean_dev_clean_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/dev/chunk":{"get":{"tags":["Dev"],"summary":"Dev Chunk","operationId":"dev_chunk_dev_chunk_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/dev/openai":{"get":{"tags":["Dev"],"summary":"Dev Openai","operationId":"dev_openai_dev_openai_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/dev/summarise":{"post":{"tags":["Dev"],"summary":"Dev Summarise","operationId":"dev_summarise_dev_summarise_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_dev_summarise_dev_summarise_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dev/ollama":{"post":{"tags":["Dev"],"summary":"Dev Ollama","description":"Quick chat endpoint for the local Ollama (Llama 3) runtime.","operationId":"dev_ollama_dev_ollama_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_dev_ollama_dev_ollama_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dev/routes":{"get":{"tags":["Dev"],"summary":"List Routes","description":"List all registered routes in the application.","operationId":"list_routes_dev_routes_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/dev/kitenga-status":{"get":{"tags":["Dev"],"summary":"Kitenga Status","description":"Get Kitenga Whiro configuration status.","operationId":"kitenga_status_dev_kitenga_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/memory/":{"get":{"tags":["Memory"],"summary":"Memory Index","operationId":"memory_index_memory__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/memory/retrieve":{"post":{"tags":["Memory"],"summary":"Memory Retrieve","operationId":"memory_retrieve_memory_retrieve_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryQuery"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pipeline/run":{"post":{"tags":["Pipeline"],"summary":"Pipeline Run","description":"Run the pipeline on an uploaded file (preferred) or inline text.","operationId":"pipeline_run_pipeline_run_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_pipeline_run_pipeline_run_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pipeline/enqueue":{"post":{"tags":["Pipeline"],"summary":"Enqueue Pipeline","description":"Enqueue a pipeline job (inline mode) or to Redis/RQ (RQ mode).\n\nQueue mode controlled by QUEUE_MODE env var:\n- inline (default): Run immediately in-process, no Redis required\n- rq: Use Redis queue, requires Redis configured\n\nReturns:\n- Inline mode: {job_id, status, result?, error?}\n- RQ mode: {job_id, rq_job_id, queue, realm, status}\n\nOptional header: X-Realm (for multi-tenant tracking)","operationId":"enqueue_pipeline_pipeline_enqueue_post","parameters":[{"name":"X-Realm","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Realm"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_enqueue_pipeline_pipeline_enqueue_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pipeline/status/{job_id}":{"get":{"tags":["Pipeline"],"summary":"Pipeline Status","description":"Return the pipeline job status from PostgreSQL (durable tracking).\n\nIncludes: status, result, error, started_at, finished_at, queue, realm.\nFalls back to Supabase if PostgreSQL unavailable (backward compat).","operationId":"pipeline_status_pipeline_status__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pipeline/jobs/recent":{"get":{"tags":["Pipeline"],"summary":"Get Recent Jobs Endpoint","description":"Get recent pipeline jobs from PostgreSQL for dashboarding.\n\nQuery parameters:\n- limit: Max results (default 50, max 500)\n- realm: Filter by realm (optional)\n- queue: Filter by queue (urgent/default/slow) (optional)\n- status: Filter by status (queued/running/finished/failed) (optional)","operationId":"get_recent_jobs_endpoint_pipeline_jobs_recent_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"realm","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"}},{"name":"queue","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Queue"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pipeline/batch":{"post":{"tags":["Pipeline"],"summary":"Enqueue Batch","description":"Enqueue multiple files; returns batch_id and job_ids.","operationId":"enqueue_batch_pipeline_batch_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_enqueue_batch_pipeline_batch_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pipeline/batch-status/{batch_id}":{"get":{"tags":["Pipeline"],"summary":"Batch Status","operationId":"batch_status_pipeline_batch_status__batch_id__get","parameters":[{"name":"batch_id","in":"path","required":true,"schema":{"type":"string","title":"Batch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pipeline/cancel/{job_id}":{"post":{"tags":["Pipeline"],"summary":"Cancel Job","operationId":"cancel_job_pipeline_cancel__job_id__post","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pipeline/health/queue":{"get":{"tags":["Pipeline"],"summary":"Queue Health","description":"Health check for queue system.\n\nIn inline mode: Returns 'disabled' (no Redis needed).\nIn RQ mode: Checks Redis connectivity and queue lengths.","operationId":"queue_health_pipeline_health_queue_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/assistant/run":{"post":{"tags":["assistant"],"summary":"Run Assistant","operationId":"run_assistant_assistant_run_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/assistant/create":{"post":{"tags":["Assistant"],"summary":"Create Assistant","description":"Create an OpenAI Assistant with optional vector store.\nUsed by Realm Generator to spin up kaitiaki with their own vector stores.\n\nPayload:\n- name: Assistant name (required)\n- instructions: System instructions (required)\n- model: Model to use (default: gpt-4o)\n- create_vector_store: Whether to create a vector store (default: True)\n- vector_store_name: Name for the vector store","operationId":"create_assistant_assistant_create_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/assistant/list":{"get":{"tags":["Assistant"],"summary":"List Assistants","description":"List all OpenAI assistants.","operationId":"list_assistants_assistant_list_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/assistant/vector-stores":{"get":{"tags":["Assistant"],"summary":"List Vector Stores","description":"List all OpenAI vector stores.","operationId":"list_vector_stores_assistant_vector_stores_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/assistant/health":{"get":{"tags":["assistant"],"summary":"Health Check","operationId":"health_check_assistant_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/assistant/version":{"get":{"tags":["assistant"],"summary":"Version","operationId":"version_assistant_version_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/{realm_id}/recall":{"post":{"tags":["Recall"],"summary":"Retrieve realm-scoped recall matches.","operationId":"realm_recall__realm_id__recall_post","parameters":[{"name":"realm_id","in":"path","required":true,"schema":{"type":"string","description":"Identifier for the realm (e.g., researcher).","title":"Realm Id"},"description":"Identifier for the realm (e.g., researcher)."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecallRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/vision-ocr":{"post":{"tags":["Kitenga"],"summary":"Vision Ocr","description":"Extract text from an image via OpenAI vision; optionally persist to vector store.","operationId":"vision_ocr_kitenga_vision_ocr_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VisionOCRRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/cards/scan":{"post":{"tags":["Kitenga","Cards","OCR Pipeline"],"summary":"Scan Cards","description":"Scan DBS cards (front/back), extract metadata, estimate value, and persist to Supabase.\n- Accepts multipart with front/back UploadFile or JSON with URLs.\n- Uses StealthOCR -> parsed metadata -> optional Brave price estimate.\n- Stores raw/process artifacts in Supabase bucket `ocr_cards` and rows in `card_scans`.","operationId":"scan_cards_kitenga_cards_scan_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_scan_cards_kitenga_cards_scan_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/tool/ocr":{"post":{"tags":["Kitenga"],"summary":"Ocr Tool Handler","operationId":"ocr_tool_handler_kitenga_tool_ocr_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OcrToolRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/tool/translate":{"post":{"tags":["Kitenga"],"summary":"Translate Tool Handler","operationId":"translate_tool_handler_kitenga_tool_translate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranslateToolRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/ask":{"post":{"tags":["Kitenga"],"summary":"Ask Kitenga","description":"Relay Te Ao chat prompts to the configured OpenAI assistant using the Assistants API.","operationId":"ask_kitenga_kitenga_ask_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KitengaAskRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/gpt-whisper":{"post":{"tags":["Kitenga"],"summary":"Gpt Whisper","description":"Free-form text -> OpenAI response with optional retrieval/pipeline/vector persistence. Supports JSON or multipart/form-data with file.","operationId":"gpt_whisper_kitenga_gpt_whisper_post","parameters":[{"name":"session_id_q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id Q"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_gpt_whisper_kitenga_gpt_whisper_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/run_pipeline":{"post":{"tags":["Kitenga"],"summary":"Run Pipeline Endpoint","description":"Endpoint to execute a pipeline.\nArgs:\n    pipeline_name: Name of the pipeline to execute.\n    input_data: Input data for the pipeline.\n    realm_name: Realm in which the pipeline resides.\n    verbose: Whether to show detailed logs.\nReturns:\n    Pipeline execution results.","operationId":"run_pipeline_endpoint_kitenga_run_pipeline_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_run_pipeline_endpoint_kitenga_run_pipeline_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/query_knowledge_base":{"post":{"tags":["Kitenga"],"summary":"Query Knowledge Base","description":"Endpoint to query the knowledge base using vector search.\nArgs:\n    query: The search query string.\n    top_k: Number of top results to return.\n    min_similarity: Minimum similarity threshold for results.\nReturns:\n    A list of matching knowledge base entries.","operationId":"query_knowledge_base_kitenga_query_knowledge_base_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_query_knowledge_base_kitenga_query_knowledge_base_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/status":{"get":{"tags":["Kitenga Schema"],"summary":"Kitenga Db Status","description":"Check kitenga schema connection status.","operationId":"kitenga_db_status_kitenga_db_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/kitenga/db/stats":{"get":{"tags":["Kitenga Schema"],"summary":"Kitenga Db Stats","description":"Get kitenga schema statistics.","operationId":"kitenga_db_stats_kitenga_db_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/kitenga/db/logs":{"post":{"tags":["Kitenga Schema"],"summary":"Create Log","description":"Create a log entry in kitenga.logs.","operationId":"create_log_kitenga_db_logs_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogEventRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/logs/recent":{"get":{"tags":["Kitenga Schema"],"summary":"Recent Logs","description":"Get recent log entries.","operationId":"recent_logs_kitenga_db_logs_recent_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"source","in":"query","required":false,"schema":{"type":"string","title":"Source"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/memory":{"post":{"tags":["Kitenga Schema"],"summary":"Create Memory","description":"Store context memory.","operationId":"create_memory_kitenga_db_memory_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/memory/search":{"post":{"tags":["Kitenga Schema"],"summary":"Search Memory Route","description":"Search context memory.","operationId":"search_memory_route_kitenga_db_memory_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/te_po__routes__kitenga_db__SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/chat/log":{"post":{"tags":["Kitenga Schema"],"summary":"Create Chat Log","description":"Save a chat log entry.","operationId":"create_chat_log_kitenga_db_chat_log_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatLogRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/chat/history/{session_id}":{"get":{"tags":["Kitenga Schema"],"summary":"Chat History","description":"Get chat history for a session.","operationId":"chat_history_kitenga_db_chat_history__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/taonga":{"post":{"tags":["Kitenga Schema"],"summary":"Create Taonga","description":"Store a taonga.","operationId":"create_taonga_kitenga_db_taonga_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaongaRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/taonga/{taonga_id}":{"get":{"tags":["Kitenga Schema"],"summary":"Get Taonga","description":"Get a taonga by ID.","operationId":"get_taonga_kitenga_db_taonga__taonga_id__get","parameters":[{"name":"taonga_id","in":"path","required":true,"schema":{"type":"string","title":"Taonga Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/taonga/search":{"post":{"tags":["Kitenga Schema"],"summary":"Search Taonga Route","description":"Search taonga.","operationId":"search_taonga_route_kitenga_db_taonga_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/te_po__routes__kitenga_db__SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/pipeline/recent":{"get":{"tags":["Kitenga Schema"],"summary":"Recent Pipelines","description":"Get recent pipeline runs.","operationId":"recent_pipelines_kitenga_db_pipeline_recent_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kitenga/db/whakapapa":{"post":{"tags":["Kitenga Schema"],"summary":"Create Whakapapa","description":"Log to whakapapa (lineage).","operationId":"create_whakapapa_kitenga_db_whakapapa_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhakapapaRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/logs/recent":{"get":{"tags":["Logs"],"summary":"Recent Logs","description":"Return the most recent audit events (reverse chronological).","operationId":"recent_logs_logs_recent_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":50,"title":"Limit"}},{"name":"contains","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by substring in event/detail","title":"Contains"},"description":"Filter by substring in event/detail"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/assistants/profiles":{"get":{"tags":["Assistants"],"summary":"Assistant Profiles","description":"Return assistant profile definitions for QA/Ops wiring.","operationId":"assistant_profiles_assistants_profiles_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/logs/ledger":{"get":{"tags":["Logs"],"summary":"Ledger","description":"Return recent carving ledger entries from Mauri state.","operationId":"ledger_logs_ledger_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":200,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/logs/state":{"get":{"tags":["Logs"],"summary":"State","description":"Return Te Pō state summary from Mauri.","operationId":"state_logs_state_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/logs/state/public":{"get":{"tags":["Logs"],"summary":"Get Public State Endpoint","description":"Fetch the public project state.","operationId":"get_public_state_endpoint_logs_state_public_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/logs/state/private":{"get":{"tags":["Logs"],"summary":"Get Private State Endpoint","description":"Fetch the private project state. Protected by BearerAuthMiddleware.","operationId":"get_private_state_endpoint_logs_state_private_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/logs/state/version":{"get":{"tags":["Logs"],"summary":"Get State Version Endpoint","description":"Fetch the current state version.","operationId":"get_state_version_endpoint_logs_state_version_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/documents/profiles":{"get":{"tags":["Documents"],"summary":"Document Profiles","description":"Return recent document profiles from local pipeline logs (best-effort) and Supabase metadata if available.","operationId":"document_profiles_documents_profiles_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat/save-session":{"post":{"tags":["Chat"],"summary":"Save Session","description":"Finalize/save a chat session: optional summary, tag, and store in Supabase logs.\n- session_id: chat session identifier\n- title: optional human-friendly title\n- tags: optional comma-separated tags\n- summarize: when true, attempts an OpenAI summary of session context","operationId":"save_session_chat_save_session_post","parameters":[{"name":"session_id","in":"query","required":true,"schema":{"type":"string","title":"Session Id"}},{"name":"title","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"}},{"name":"tags","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tags"}},{"name":"summarize","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Summarize"}},{"name":"summary_words","in":"query","required":false,"schema":{"type":"integer","default":300,"title":"Summary Words"}},{"name":"write_ari","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Write Ari"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cards/scan-image":{"post":{"tags":["Cards"],"summary":"Scan Image","description":"Run OCR on a card photo to extract card details (name, number, rarity).","operationId":"scan_image_cards_scan_image_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_scan_image_cards_scan_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cards/estimate-value":{"post":{"tags":["Cards"],"summary":"Estimate Value","description":"Aggregate multi-source valuation for a trading card.","operationId":"estimate_value_cards_estimate_value_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cards/build-row":{"post":{"tags":["Cards"],"summary":"Build Row","description":"Build a Trade Me-ready row from card metadata.","operationId":"build_row_cards_build_row_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cards/build-csv":{"post":{"tags":["Cards"],"summary":"Build Csv","description":"Build a CSV from a list of card objects.\ngroups_of: batch size (default 10) for splitting files client-side.","operationId":"build_csv_cards_build_csv_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cards/value":{"post":{"tags":["Cards"],"summary":"Card Value","description":"Lookup card value from reference; fallback to default.","operationId":"card_value_cards_value_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cards/upload-image":{"post":{"tags":["Cards"],"summary":"Upload Image","description":"Upload a single card image to Supabase storage and return its public URL.","operationId":"upload_image_cards_upload_image_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_image_cards_upload_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/roshi/query_card_context":{"post":{"tags":["Cards","Vector"],"summary":"Query Card Context","description":"Vector search over card_context_index. Body: { query: \"text\" }","operationId":"query_card_context_roshi_query_card_context_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sell/add_to_csv":{"post":{"tags":["Cards","TradeMe"],"summary":"Add To Csv","description":"Log a card for Trade Me CSV output by inserting into cards_for_sale.","operationId":"add_to_csv_sell_add_to_csv_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics":{"get":{"tags":["Metrics"],"summary":"Metrics","operationId":"metrics_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/envelope":{"post":{"tags":["awa-protocol"],"summary":"Wrap Envelope","description":"Wrap message with realm context.\nAdds realm identity, timestamp, and metadata.","operationId":"wrap_envelope_awa_envelope_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnvelopeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/task":{"post":{"tags":["awa-protocol"],"summary":"Execute Task","description":"Execute a kaitiaki task.\nRoutes to the specified kaitiaki with task details.","operationId":"execute_task_awa_task_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/handoff":{"post":{"tags":["awa-protocol"],"summary":"Handoff Task","description":"Transfer task between kaitiaki.\nRecords context transfer and updates ownership.","operationId":"handoff_task_awa_handoff_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HandoffRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/memory/query":{"post":{"tags":["awa-protocol"],"summary":"Query Memory","description":"Semantic search across vector memory.\nReturns documents with similarity scores.","operationId":"query_memory_awa_memory_query_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryQueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/memory/store":{"post":{"tags":["awa-protocol"],"summary":"Store Memory","description":"Store content to vector memory with embedding.\nAssigns tapu level and metadata.","operationId":"store_memory_awa_memory_store_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryStoreRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/log":{"post":{"tags":["awa-protocol"],"summary":"Log Activity","description":"Log activity to carving log.\nCreates immutable audit trail entry.","operationId":"log_activity_awa_log_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/notify":{"post":{"tags":["awa-protocol"],"summary":"Send Notification","description":"Send notification to recipient.\nSupports multiple channels (Slack, email, realtime).","operationId":"send_notification_awa_notify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotifyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/kaitiaki/register":{"post":{"tags":["awa-protocol"],"summary":"Register Kaitiaki","description":"Register a new kaitiaki (guardian agent).\nStores role, system prompt, and tool definitions.","operationId":"register_kaitiaki_awa_kaitiaki_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KaitiakiregisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/kaitiaki/context":{"post":{"tags":["awa-protocol"],"summary":"Get Kaitiaki Context","description":"Get context (state, capabilities, memory) for a kaitiaki.","operationId":"get_kaitiaki_context_awa_kaitiaki_context_post","parameters":[{"name":"kaitiaki","in":"query","required":true,"schema":{"type":"string","title":"Kaitiaki"}},{"name":"realm","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/kaitiaki":{"get":{"tags":["awa-protocol"],"summary":"List Kaitiaki","description":"List all registered kaitiaki in the system.","operationId":"list_kaitiaki_awa_kaitiaki_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/vector/embed":{"post":{"tags":["awa-protocol"],"summary":"Generate Embeddings","description":"Generate embeddings for text.\nUses configured embedding model (OpenAI).","operationId":"generate_embeddings_awa_vector_embed_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VectorEmbedRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/vector/search":{"post":{"tags":["awa-protocol"],"summary":"Semantic Search","description":"Semantic search (alias for /awa/memory/query).","operationId":"semantic_search_awa_vector_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryQueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/pipeline":{"post":{"tags":["awa-protocol"],"summary":"Run Pipeline","description":"Execute a Te Pō pipeline.\nValid pipelines: ocr, summarise, translate, embed, taonga","operationId":"run_pipeline_awa_pipeline_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PipelineRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/pipelines":{"get":{"tags":["awa-protocol"],"summary":"List Pipelines","description":"List available pipelines.","operationId":"list_pipelines_awa_pipelines_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/llama3/review":{"post":{"tags":["llama3-local"],"summary":"Review Code","description":"Review code for issues and improvements.","operationId":"review_code_awa_llama3_review_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodeReviewRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CodeReviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/llama3/docstring":{"post":{"tags":["llama3-local"],"summary":"Generate Docstring","description":"Generate docstring for code.","operationId":"generate_docstring_awa_llama3_docstring_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocstringRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocstringResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/llama3/analyze-error":{"post":{"tags":["llama3-local"],"summary":"Analyze Error","description":"Analyze an error and suggest solutions.","operationId":"analyze_error_awa_llama3_analyze_error_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/awa/llama3/status":{"get":{"tags":["llama3-local"],"summary":"Llama3 Status","description":"Check if Llama3 is available.","operationId":"llama3_status_awa_llama3_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/realms/create":{"post":{"tags":["realms"],"summary":"Create Realm","description":"Create a new realm from template\n\nThis will:\n1. Create an OpenAI assistant for the realm's kaitiaki\n2. Create a vector store for the realm's knowledge\n3. Copy the project template to /realms/{realm_slug}/\n4. Replace all placeholders with realm-specific values\n5. Generate realm config and README\n6. Initialize git repo (user pushes when ready)","operationId":"create_realm_realms_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealmCreateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealmResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/realms/status/github":{"get":{"tags":["realms"],"summary":"Github Status","description":"Check if GitHub integration is available","operationId":"github_status_realms_status_github_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/realms/list":{"get":{"tags":["realms"],"summary":"List All Realms","description":"List all spawned realms\n\nReturns all realms in the /realms/ directory with their configs","operationId":"list_all_realms_realms_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealmResponse"}}}}}}},"/realms/{realm_slug}":{"get":{"tags":["realms"],"summary":"Get Realm Info","description":"Get information about a specific realm\n\nArgs:\n    realm_slug: The slug identifier for the realm (e.g., te_wai)","operationId":"get_realm_info_realms__realm_slug__get","parameters":[{"name":"realm_slug","in":"path","required":true,"schema":{"type":"string","title":"Realm Slug"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealmResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["realms"],"summary":"Delete Realm","description":"Delete a realm\n\nWARNING: This permanently deletes the realm folder.\nDoes NOT delete OpenAI resources (assistant, vector store).\n\nArgs:\n    realm_slug: The slug identifier for the realm\n    confirm: Must be True to actually delete","operationId":"delete_realm_realms__realm_slug__delete","parameters":[{"name":"realm_slug","in":"path","required":true,"schema":{"type":"string","title":"Realm Slug"}},{"name":"confirm","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Confirm"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RealmResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/realms/{realm_slug}/sql":{"get":{"tags":["realms"],"summary":"Get Realm Sql","description":"Get the SQL migration script for a realm's tables\n\nArgs:\n    realm_slug: The slug identifier for the realm\n    kaitiaki_name: Name of the kaitiaki guardian","operationId":"get_realm_sql_realms__realm_slug__sql_get","parameters":[{"name":"realm_slug","in":"path","required":true,"schema":{"type":"string","title":"Realm Slug"}},{"name":"kaitiaki_name","in":"query","required":false,"schema":{"type":"string","default":"Kaitiaki","title":"Kaitiaki Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/realms/template/info":{"get":{"tags":["realms"],"summary":"Get Template Info","description":"Get information about the realm template\n\nReturns the template config showing what placeholders and secrets are needed","operationId":"get_template_info_realms_template_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/cors/origins":{"get":{"tags":["cors"],"summary":"List Origins","description":"List all currently allowed CORS origins.","operationId":"list_origins_cors_origins_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OriginsResponse"}}}}}}},"/cors/origins/add":{"post":{"tags":["cors"],"summary":"Add Origin","description":"Add a new CORS origin at runtime.","operationId":"add_origin_cors_origins_add_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OriginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cors/origins/remove":{"post":{"tags":["cors"],"summary":"Remove Origin","description":"Remove a CORS origin at runtime.","operationId":"remove_origin_cors_origins_remove_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OriginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cors/origins/reset":{"post":{"tags":["cors"],"summary":"Reset Origins","description":"Reset CORS origins to defaults.","operationId":"reset_origins_cors_origins_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/bridge/test":{"get":{"tags":["Awa ↔ Kitenga Bridge"],"summary":"Bridge Test","description":"Ping Kitenga MCP health from Te Pō.","operationId":"bridge_test_awa_bridge_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/awa/orchestrate":{"post":{"tags":["Awa ↔ Kitenga Bridge"],"summary":"Awa Orchestrate","description":"Orchestrate a full Awa → Kitenga tool/pipeline execution.","operationId":"awa_orchestrate_awa_awa_orchestrate_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/gpt/bridge":{"post":{"tags":["Awa ↔ Kitenga Bridge"],"summary":"Gpt Bridge","description":"GPT front-door for orchestration requests.","operationId":"gpt_bridge_awa_gpt_bridge_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/gpt/invoke":{"post":{"tags":["AwaGPT"],"summary":"Awa Gpt Invoke","operationId":"awa_gpt_invoke_awa_gpt_invoke_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/gpt/realtime/toggle":{"post":{"tags":["AwaGPT Realtime"],"summary":"Toggle Realtime","operationId":"toggle_realtime_awa_gpt_realtime_toggle_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/awa/gpt/realtime/status":{"get":{"tags":["AwaGPT Realtime"],"summary":"Realtime Status","operationId":"realtime_status_awa_gpt_realtime_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_dev_ocr_dev_ocr_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_dev_ocr_dev_ocr_post"},"Body_dev_ollama_dev_ollama_post":{"properties":{"prompt":{"type":"string","title":"Prompt"},"system_prompt":{"type":"string","title":"System Prompt","default":"You are a helpful Māori research assistant."},"model":{"type":"string","title":"Model"}},"type":"object","required":["prompt"],"title":"Body_dev_ollama_dev_ollama_post"},"Body_dev_summarise_dev_summarise_post":{"properties":{"text":{"type":"string","title":"Text"},"mode":{"type":"string","title":"Mode","default":"research"}},"type":"object","required":["text"],"title":"Body_dev_summarise_dev_summarise_post"},"Body_enqueue_batch_pipeline_batch_post":{"properties":{"files":{"items":{"type":"string","format":"binary"},"type":"array","title":"Files"}},"type":"object","required":["files"],"title":"Body_enqueue_batch_pipeline_batch_post"},"Body_enqueue_pipeline_pipeline_enqueue_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_enqueue_pipeline_pipeline_enqueue_post"},"Body_gpt_whisper_kitenga_gpt_whisper_post":{"properties":{"payload":{"anyOf":[{"$ref":"#/components/schemas/WhisperRequest"},{"type":"null"}]},"file":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"File"},"whisper":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whisper"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"thread_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thread Id"},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt"},"run_pipeline":{"anyOf":[{"type":"boolean"},{"type":"string"}],"title":"Run Pipeline","default":false},"save_vector":{"anyOf":[{"type":"boolean"},{"type":"string"}],"title":"Save Vector","default":false},"use_retrieval":{"anyOf":[{"type":"boolean"},{"type":"string"}],"title":"Use Retrieval","default":false},"use_openai_summary":{"anyOf":[{"type":"boolean"},{"type":"string"}],"title":"Use Openai Summary","default":false},"use_openai_translation":{"anyOf":[{"type":"boolean"},{"type":"string"}],"title":"Use Openai Translation","default":false},"mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mode","default":"research"},"allow_taonga_store":{"anyOf":[{"type":"boolean"},{"type":"string"}],"title":"Allow Taonga Store","default":false},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"type":"object","title":"Body_gpt_whisper_kitenga_gpt_whisper_post"},"Body_intake_ocr_intake_ocr_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_intake_ocr_intake_ocr_post"},"Body_pipeline_run_pipeline_run_post":{"properties":{"file":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"File"},"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"source":{"type":"string","title":"Source","default":"api"}},"type":"object","title":"Body_pipeline_run_pipeline_run_post"},"Body_query_knowledge_base_kitenga_query_knowledge_base_post":{"properties":{"query":{"type":"string","title":"Query"},"top_k":{"type":"integer","title":"Top K","default":5},"min_similarity":{"type":"number","title":"Min Similarity","default":0.7}},"type":"object","required":["query"],"title":"Body_query_knowledge_base_kitenga_query_knowledge_base_post"},"Body_run_pipeline_endpoint_kitenga_run_pipeline_post":{"properties":{"pipeline_name":{"type":"string","title":"Pipeline Name"},"input_data":{"type":"string","title":"Input Data"},"realm_name":{"type":"string","title":"Realm Name","default":"Te_Po"},"verbose":{"type":"boolean","title":"Verbose","default":false}},"type":"object","required":["pipeline_name","input_data"],"title":"Body_run_pipeline_endpoint_kitenga_run_pipeline_post"},"Body_scan_cards_kitenga_cards_scan_post":{"properties":{"front":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"Front"},"back":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"Back"},"payload":{"anyOf":[{"$ref":"#/components/schemas/CardScanRequest"},{"type":"null"}]}},"type":"object","title":"Body_scan_cards_kitenga_cards_scan_post"},"Body_scan_image_cards_scan_image_post":{"properties":{"image":{"type":"string","format":"binary","title":"Image"}},"type":"object","required":["image"],"title":"Body_scan_image_cards_scan_image_post"},"Body_scan_ocr_scan_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_scan_ocr_scan_post"},"Body_stealth_scan_ocr_stealth_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_stealth_scan_ocr_stealth_post"},"Body_stealth_scan_testit_ocr_stealth_testit_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_stealth_scan_testit_ocr_stealth_testit_post"},"Body_upload_image_cards_upload_image_post":{"properties":{"image":{"type":"string","format":"binary","title":"Image"}},"type":"object","required":["image"],"title":"Body_upload_image_cards_upload_image_post"},"CardScanRequest":{"properties":{"card_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Card Name"},"series":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Series"},"card_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Card Number"},"rarity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rarity"},"front_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Front Url"},"back_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Back Url"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"save_processed":{"type":"boolean","title":"Save Processed","default":true}},"type":"object","title":"CardScanRequest"},"ChatLogRequest":{"properties":{"session_id":{"type":"string","title":"Session Id"},"user_message":{"type":"string","title":"User Message"},"assistant_reply":{"type":"string","title":"Assistant Reply"},"thread_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thread Id"},"mode":{"type":"string","title":"Mode","default":"chat"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["session_id","user_message","assistant_reply"],"title":"ChatLogRequest"},"CodeReviewRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Code to review"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"focus":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Focus","description":"Specific areas to focus on (e.g., 'performance', 'security')"}},"type":"object","required":["code"],"title":"CodeReviewRequest","description":"Request code review from Llama3."},"CodeReviewResponse":{"properties":{"language":{"type":"string","title":"Language"},"issues":{"items":{"type":"string"},"type":"array","title":"Issues"},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions"},"overall_score":{"type":"integer","title":"Overall Score"}},"type":"object","required":["language","issues","suggestions","overall_score"],"title":"CodeReviewResponse","description":"Code review results."},"DocstringRequest":{"properties":{"code":{"type":"string","title":"Code","description":"Code to document"},"language":{"type":"string","title":"Language","description":"Programming language","default":"python"},"style":{"type":"string","title":"Style","description":"Docstring style (numpy, google, sphinx)","default":"numpy"}},"type":"object","required":["code"],"title":"DocstringRequest","description":"Request docstring generation."},"DocstringResponse":{"properties":{"docstring":{"type":"string","title":"Docstring"},"language":{"type":"string","title":"Language"},"style":{"type":"string","title":"Style"}},"type":"object","required":["docstring","language","style"],"title":"DocstringResponse","description":"Generated docstring."},"EmbedRequest":{"properties":{"text":{"type":"string","title":"Text"}},"type":"object","required":["text"],"title":"EmbedRequest"},"EnvelopeRequest":{"properties":{"message":{"type":"string","title":"Message"},"realm":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["message"],"title":"EnvelopeRequest","description":"Wrap message with realm context."},"ErrorAnalysisRequest":{"properties":{"error":{"type":"string","title":"Error","description":"Error message or traceback"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context","description":"Code context or error description"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"Programming language"}},"type":"object","required":["error"],"title":"ErrorAnalysisRequest","description":"Request error analysis from Llama3."},"ErrorAnalysisResponse":{"properties":{"root_cause":{"type":"string","title":"Root Cause"},"explanation":{"type":"string","title":"Explanation"},"solutions":{"items":{"type":"string"},"type":"array","title":"Solutions"},"severity":{"type":"string","title":"Severity"}},"type":"object","required":["root_cause","explanation","solutions","severity"],"title":"ErrorAnalysisResponse","description":"Error analysis results."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HandoffRequest":{"properties":{"from_kaitiaki":{"type":"string","title":"From Kaitiaki"},"to_kaitiaki":{"type":"string","title":"To Kaitiaki"},"task_id":{"type":"string","title":"Task Id"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context"}},"type":"object","required":["from_kaitiaki","to_kaitiaki","task_id"],"title":"HandoffRequest","description":"Transfer task between kaitiaki."},"KaitiakiregisterRequest":{"properties":{"name":{"type":"string","title":"Name"},"role":{"type":"string","title":"Role"},"system_prompt":{"type":"string","title":"System Prompt"},"tools":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tools"},"realm":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"}},"type":"object","required":["name","role","system_prompt"],"title":"KaitiakiregisterRequest","description":"Register kaitiaki."},"KitengaAskRequest":{"properties":{"prompt":{"type":"string","maxLength":10000,"title":"Prompt"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id","description":"Supabase logging session id"},"thread_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thread Id","description":"Assistant thread id for continuity"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"Optional metadata stored in logs"}},"type":"object","required":["prompt"],"title":"KitengaAskRequest"},"LogEventRequest":{"properties":{"event":{"type":"string","title":"Event"},"detail":{"type":"string","title":"Detail"},"source":{"type":"string","title":"Source","default":"kitenga_whiro"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["event","detail"],"title":"LogEventRequest"},"LogRequest":{"properties":{"event_type":{"type":"string","title":"Event Type"},"details":{"additionalProperties":true,"type":"object","title":"Details"},"realm":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"},"severity":{"type":"string","title":"Severity","default":"info"}},"type":"object","required":["event_type","details"],"title":"LogRequest","description":"Log activity."},"MemoryQuery":{"properties":{"query":{"type":"string","title":"Query"},"top_k":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Top K","default":5},"min_similarity":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Similarity","default":0.0}},"type":"object","required":["query"],"title":"MemoryQuery"},"MemoryQueryRequest":{"properties":{"query":{"type":"string","title":"Query"},"top_k":{"type":"integer","title":"Top K","default":5},"threshold":{"type":"number","title":"Threshold","default":0.7},"realm":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"},"tapu_level":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tapu Level"}},"type":"object","required":["query"],"title":"MemoryQueryRequest","description":"Query vector memory."},"MemoryRequest":{"properties":{"content":{"type":"string","title":"Content"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["content"],"title":"MemoryRequest"},"MemoryStoreRequest":{"properties":{"content":{"type":"string","title":"Content"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"realm":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"},"tapu_level":{"type":"integer","title":"Tapu Level","default":0}},"type":"object","required":["content"],"title":"MemoryStoreRequest","description":"Store to vector memory."},"NotifyRequest":{"properties":{"recipient":{"type":"string","title":"Recipient"},"message":{"type":"string","title":"Message"},"channel":{"type":"string","title":"Channel","default":"default"},"priority":{"type":"string","title":"Priority","default":"normal"}},"type":"object","required":["recipient","message"],"title":"NotifyRequest","description":"Send notification."},"OcrToolRequest":{"properties":{"file_url":{"type":"string","title":"File Url","description":"Remote URL with the bytes to OCR"},"taonga_mode":{"type":"boolean","title":"Taonga Mode","description":"Preserve stealth metadata when true","default":false},"prefer_offline":{"type":"boolean","title":"Prefer Offline","description":"Try local OCR before OpenAI vision","default":true}},"type":"object","required":["file_url"],"title":"OcrToolRequest"},"OriginRequest":{"properties":{"origin":{"type":"string","title":"Origin"}},"type":"object","required":["origin"],"title":"OriginRequest"},"OriginsResponse":{"properties":{"origins":{"items":{"type":"string"},"type":"array","title":"Origins"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["origins","count"],"title":"OriginsResponse"},"PipelineRequest":{"properties":{"name":{"type":"string","title":"Name"},"input":{"additionalProperties":true,"type":"object","title":"Input"},"wait":{"type":"boolean","title":"Wait","default":false},"realm":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"}},"type":"object","required":["name","input"],"title":"PipelineRequest","description":"Run pipeline."},"RealmCreateRequest":{"properties":{"realm_name":{"type":"string","title":"Realm Name","description":"Name of the realm (e.g., Te Wai)"},"kaitiaki_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kaitiaki Name","description":"Name of the guardian"},"kaitiaki_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kaitiaki Role","description":"Role/title of the guardian"},"kaitiaki_instructions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kaitiaki Instructions","description":"Custom instructions for the AI assistant"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Description of the realm and its purpose"},"selected_apis":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Selected Apis","description":"List of APIs to enable"},"template":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Template","description":"Template type: basic, with-kaitiaki, with-storage, full","default":"basic"},"cloudflare_hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cloudflare Hostname","description":"Custom Cloudflare hostname"},"pages_project":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pages Project","description":"Cloudflare Pages project name"},"backend_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Backend Url","description":"Custom backend URL"},"github_org":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Github Org","description":"GitHub organization for suggested repo URL"}},"type":"object","required":["realm_name"],"title":"RealmCreateRequest","description":"Request to create a new realm"},"RealmResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["success","message"],"title":"RealmResponse","description":"Response for realm operations"},"RecallRequest":{"properties":{"query":{"type":"string","title":"Query","description":"User query to recall context for."},"thread_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thread Id","description":"Optional thread/session identifier."},"top_k":{"anyOf":[{"type":"integer","maximum":50.0,"minimum":1.0},{"type":"null"}],"title":"Top K","description":"Maximum matches to return."},"vector_store":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vector Store","description":"Vector store backend hint (e.g., 'supabase', 'openai')."}},"type":"object","required":["query"],"title":"RecallRequest"},"ReoRequest":{"properties":{"text":{"type":"string","title":"Text"}},"type":"object","required":["text"],"title":"ReoRequest"},"SummarizeRequest":{"properties":{"text":{"type":"string","title":"Text"},"mode":{"type":"string","title":"Mode"}},"type":"object","required":["text","mode"],"title":"SummarizeRequest"},"TaongaRequest":{"properties":{"title":{"type":"string","title":"Title"},"content":{"type":"string","title":"Content"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["title","content"],"title":"TaongaRequest"},"TaskRequest":{"properties":{"kaitiaki":{"type":"string","title":"Kaitiaki"},"task":{"type":"string","title":"Task"},"input":{"additionalProperties":true,"type":"object","title":"Input"},"priority":{"type":"string","title":"Priority","default":"normal"},"realm":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realm"}},"type":"object","required":["kaitiaki","task","input"],"title":"TaskRequest","description":"Execute a kaitiaki task."},"TranslateToolRequest":{"properties":{"text":{"type":"string","maxLength":10000,"title":"Text","description":"Text to translate"},"target_language":{"type":"string","title":"Target Language","description":"Language code e.g., mi/en","default":"mi"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context","description":"Optional translation context or guidance"}},"type":"object","required":["text"],"title":"TranslateToolRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VectorEmbedRequest":{"properties":{"text":{"type":"string","title":"Text"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"}},"type":"object","required":["text"],"title":"VectorEmbedRequest","description":"Generate embeddings."},"VisionOCRRequest":{"properties":{"image_base64":{"type":"string","maxLength":10485760,"title":"Image Base64"},"save_vector":{"type":"boolean","title":"Save Vector","default":false},"run_pipeline":{"type":"boolean","title":"Run Pipeline","default":false},"pipeline_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Source"}},"type":"object","required":["image_base64"],"title":"VisionOCRRequest"},"WhakapapaRequest":{"properties":{"id":{"type":"string","title":"Id"},"title":{"type":"string","title":"Title"},"category":{"type":"string","title":"Category"},"summary":{"type":"string","title":"Summary"},"content_type":{"type":"string","title":"Content Type","default":"event"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"},"author":{"type":"string","title":"Author","default":"kitenga_whiro"}},"type":"object","required":["id","title","category","summary"],"title":"WhakapapaRequest"},"WhisperRequest":{"properties":{"whisper":{"type":"string","maxLength":10000,"title":"Whisper"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"thread_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thread Id"},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt"},"run_pipeline":{"type":"boolean","title":"Run Pipeline","default":false},"save_vector":{"type":"boolean","title":"Save Vector","default":false},"use_retrieval":{"type":"boolean","title":"Use Retrieval","default":false},"use_openai_summary":{"type":"boolean","title":"Use Openai Summary","default":false},"use_openai_translation":{"type":"boolean","title":"Use Openai Translation","default":false},"mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mode","description":"Mode flag e.g., research or taonga","default":"research"},"allow_taonga_store":{"type":"boolean","title":"Allow Taonga Store","description":"If true, taonga mode still stores/uploads","default":false},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"type":"object","required":["whisper"],"title":"WhisperRequest"},"te_po__models__vector_models__SearchRequest":{"properties":{"query":{"type":"string","title":"Query"},"top_k":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Top K","default":5}},"type":"object","required":["query"],"title":"SearchRequest"},"te_po__routes__kitenga_db__SearchRequest":{"properties":{"query":{"type":"string","title":"Query"},"limit":{"type":"integer","title":"Limit","default":10}},"type":"object","required":["query"],"title":"SearchRequest"}}}}